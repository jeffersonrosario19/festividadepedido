<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cardápio Online</title>

  <style>
    /* ==================== VARIÁVEIS GLOBAIS CORES ==================== */
    :root {
      --cor-bck-body: rgb(247, 247, 247);
      --cor-bck-card: rgb(255, 255, 255);
      --cor-bk-popup: rgba(91, 72, 165, 0.557);
      --cor-white: #ffffff;
      --cor-h2: #333333;
      --cor-item: #003d1c;
      --cor-preco: #868686;
      --cor-botao: #5b48a5;
      --cor-botao-hover: #b4a1ff;
      --cor-border-card: #c0c0c0;
      --cor-border-card-hover: #5b48a5;
      --cor-border-categoria: #5B48A5;
      --cor-categoria: #b4a1ff;
    }

    /* ==================== ESTILOS GERAIS ==================== */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 1rem;
      background: var(--cor-bck-body);
    }

    header {
      text-align: center;
    }
    header h1 {
      margin: 0 0 1rem 0;
      color: var(--cor-h2);
    }
    /* ==================== total liquido ==================== */
    .tt-liquido {
      font-size: 1.2rem;
      text-align: center;
      color: #e67e22;
      font-weight: bold;
      margin-top: 10px;
    }

    .footer-fixo {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      width: 100%;
      background: transparent;
      padding: 0.8rem 1rem;
      text-align: center;
      box-shadow: 0 -2px 6px rgba(13, 156, 0, 0.582);
      z-index: 100;
    }

    h2 {
      margin: 0;
      color: var(--cor-h2);
    }

    section {
      margin-bottom: 5px;
    }

    /* ==================== TÍTULO DAS CATEGORIAS ==================== */
    .category-title {
      border-left: 5px solid var(--cor-border-categoria);
      background: var(--cor-categoria);
      padding: 0.5rem 1rem;
      font-size: var(--categoria-font);
      font-weight: bold;
      color: var(--cor-border-categoria);
      margin-bottom: 10px;
      cursor: pointer;
      user-select: none;
      transition: background 0.3s, color 0.3s;
    }

    /* ==================== GRID DE ITENS ==================== */
    .grid {
      display: grid;
      grid-template-columns: repeat(3, 2fr);
      gap: 10px;
    }

    /* ==================== CARD DE CADA ITEM ==================== */
    .item {
      background: var(--cor-bck-card);
      border: 1px solid var(--cor-border-card);
      padding: 1rem;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(62, 255, 88, 0.05);
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: center;
      transition: 0.3s;
    }

    .item:hover {
      background: var(--cor-white);
      transform: scale(1.02);
      cursor: pointer;
      border: 1px solid var(--cor-border-card-hover);
    }

    .item-name {
      font-weight: bold;
      color: var(--cor-item);
    }

    .item-price {
      font-size: var(--preco-font);
      color: var(--cor-preco);
      margin-top: 0.3rem;
      font-weight: bold;
      /* codigo pra alinhar texto abaixo */
    }

    .hidden {
      display: none;
    }

    .icone-car {
      width: 25px;
      height: 25px;
      vertical-align: middle;
      margin-right: 8px;
    }

    .botao-carrinho {
      background: var(--cor-botao);
      color: #fff;
      border: none;
      padding: 8px 15px;
      border-radius: 5px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      display: inline;
      align-items: center;
      transition: 0.3s;
    }

    .botao-carrinho:hover {
      background: var(--cor-botao-hover);
    }

    /* ==================== POPUPS ==================== */
    .popup {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: var(--cor-bk-popup);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 3000;
    }
    .popup-carVazio {
      background-color: var(--cor-white);
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
      padding: 2rem;
      border-radius: 10px;
      text-align: center;
      width: 100%;
      max-width: 180px;
    }
    .popup-conteudo {
      background-color: var(--cor-white);
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
      padding: 2rem;
      border-radius: 10px;
      text-align: center;
      width: 100%;
      max-width: 260px;
    }

    .popup input[type="number"] {
      width: 100px;
      padding: 0.5rem;
      margin: 1rem 0;
      font-size: 1.5rem;
      border-radius: 5px;
      color: #0000ff;
      text-align: center;
    }

    .popup .botoes {
      display: flex;
      justify-content: space-around;
      gap: 1rem;
    }

    .popup .confirmar {
      border: 1px solid rgb(255, 255, 255);
      padding: 0.6rem 1.2rem;
      border-radius: 10px;
      font-weight: bold;
      background-color: var(--cor-botao);
      color: white;
    }

    .popup .cancelar {
      border: 1px solid #838383;
      padding: 0.6rem 1.2rem;
      border-radius: 10px;
      font-weight: bold;
      background-color: #ececec;
      color: #838383;
    }
    button.confirmar, button.cancelar {
      cursor: pointer;
    }

#popup-alerta .alerta-icone {
  font-size: 3rem;
  margin-bottom: 0.5rem;
  color: #f39c12;
  text-align: center;
}

    /* ==================== DETALHES DO RESUMO ==================== */
    .subtotal {
      color: #e6e322;
      font-weight: bold;
    }

    .valor-troco {
      font-weight: bold;
      color: rgb(0, 160, 0);
      margin-top: 0.5rem;
      font-size: 1.6rem;
    }

    #valor-dinheiro {
      width: 150px;
      height: 2.5rem;
      font-size: 1.3rem;
      padding: 0.3rem 0.5rem;
    }

    button.remover-item {
      margin-top: 5px;
      padding: 3px 7px;
      font-size: 0.9rem;
      cursor: pointer;
      background-color: #fae9e7;
      color: rgb(255, 0, 0);
      border: none;
      border-radius: 5px;
      transition: background-color 0.3s ease;
    }

    button.remover-item:hover {
      background-color: #c0392b;
    }
  </style>
</head>
<body>

  <!-- ==================== CABEÇALHO ==================== -->
  <header>
    <h1>Cardápio</h1>
  </header>

  <!-- ==================== SEÇÃO DE PRATOS ==================== -->
  <section>
    <div class="category-title" onclick="toggleGrid('pratos')">Pratos Típicos</div>
    <div id="pratos" class="grid">
      <div class="item"><div class="item-name">Vatapá</div><div class="item-price">R$ 6,00</div></div>
      <div class="item"><div class="item-name">Lasanha</div><div class="item-price">R$ 8,00</div></div>
      <div class="item"><div class="item-name">Churrasco</div><div class="item-price">R$ 12,00</div></div>
      <div class="item"><div class="item-name">Torta Salgada</div><div class="item-price">R$ 6,00</div></div>
      <div class="item"><div class="item-name">Tacacá</div><div class="item-price">R$ 10,00</div></div>
      <div class="item"><div class="item-name">Arroz com galinha</div><div class="item-price">R$ 6,00</div></div>
    </div>
  </section>

  <!-- ==================== SEÇÃO DE BOLOS ==================== -->
  <section>
    <div class="category-title" onclick="toggleGrid('bolos')">Bolos e doces</div>
    <div id="bolos" class="grid hidden">
      <div class="item"><div class="item-name">Bolo simples</div><div class="item-price">R$ 3,00</div></div>
      <div class="item"><div class="item-name">Bolo com cobertura</div><div class="item-price">R$ 5,00</div></div>
      <div class="item"><div class="item-name">Bolo de chocolate</div><div class="item-price">R$ 5,00</div></div>
      <div class="item"><div class="item-name">Pudim</div><div class="item-price">R$ 4,00</div></div>
      <div class="item"><div class="item-name">Maçã do Amor</div><div class="item-price">R$ 5,00</div></div>
    </div>
  </section>

  <!-- ==================== SEÇÃO DE BEBIDAS ==================== -->
  <section>
    <div class="category-title" onclick="toggleGrid('bebidas')">Bebidas</div>
    <div id="bebidas" class="grid hidden">
      <div class="item"><div class="item-name">Refri. Guaraná 2L</div><div class="item-price">R$ 10,00</div></div>
      <div class="item"><div class="item-name">Coca-Cola 2L</div><div class="item-price">R$ 15,00</div></div>
      <div class="item"><div class="item-name">Coca-Cola 1L</div><div class="item-price">R$ 8,00</div></div>
      <div class="item"><div class="item-name">Fanta Uva 2L</div><div class="item-price">R$ 12,00</div></div>
      <div class="item"><div class="item-name">Fanta Laranja 2L</div><div class="item-price">R$ 12,00</div></div>
      <div class="item"><div class="item-name">Fanta Laranja 1L</div><div class="item-price">R$ 6,00</div></div>
      <div class="item"><div class="item-name">Água</div><div class="item-price">R$ 3,00</div></div>
    </div>
  </section>

  <!-- ==================== RODAPÉ COM BOTÃO DO CARRINHO ==================== -->
  <footer class="footer-fixo">
    <button class="botao-carrinho" onclick="mostrarResumo()"><img class="icone-car" src="img/icone_car.svg" alt="Carrinho" /> Carrinho</button>
  </footer>
  <!-- ==================== POP-UP DE QUANTIDADE ==================== -->
  <div id="popup" class="popup">
    <div class="popup-conteudo">
      <h2 id="popup-title">Inserir quant.</h2>
      <input type="number" id="popup-input" placeholder="Qtd" min="1" />

      <div class="botoes">
        <button class="cancelar" onclick="fecharPopup()">Voltar</button>
        <button class="confirmar" onclick="confirmarPopup()">Inserir</button>
      </div>
    </div>
  </div>
 
<!-- ==================== POP-UP DE RESUMO DO PEDIDO ==================== -->
<div id="resumo-pedido" class="popup">
  <div class="popup-conteudo" style="max-height: 80vh; overflow-y: auto;">
    <h2>Resumo do Pedido</h2>
    <div id="lista-pedido" style="text-align: left; font-size: 1rem; margin-bottom: 1rem;"></div>
    <div class="botoes">
      <button href="#" class="cancelar" onclick="fecharResumo()">Voltar</button>
      <button href="#" class="confirmar" onclick="abrirPagamento()">Dinheiro</button>
      <button href="#" class="confirmar" onclick="abrirqrcode()">Pix</button>
    </div>
  </div>
</div>

<!-- ==================== POP-UP DE PAGAMENTO ==================== -->
<div id="pagamento" class="popup">
  <div class="popup-conteudo" style="max-height: 85vh; overflow-y: auto;">
    <h2>Concluir Pagamento</h2>
    <div id="pagamento-itens" style="text-align: left; font-size: 1rem; margin-bottom: 1rem;"></div>
    <label for="valor-dinheiro" style="font-size: 1.3rem;">Valor em dinheiro:</label>
    <div style="display:flex; align-items:center;">
      <span style="margin-right: 5px;">R$</span>
      <input type="number" id="valor-dinheiro" min="0" oninput="calcularTroco()" />
    </div>
    <p id="valor-troco" class="valor-troco"></p>
    <div class="botoes">
      <button href="#" class="cancelar" onclick="fecharPagamento()">Voltar</button>
      <button href="#" class="confirmar" onclick="concluirPedido()">Finalizar</button>
    </div>
  </div>
</div>

<!-- ==================== POP-UP MENSAGEM FINAL ==================== -->
<div id="mensagem-final" class="popup">
  <div class="popup-conteudo mensagem">
    <h2>✅ Pedido concluído com sucesso!</h2>
    <p>Imprima o recibo e entregue ao cliente.</p>
  </div>
</div>

<!-- ==================== POP-UP DE ALERTA (CARRINHO VAZIO) ==================== -->
<div id="popup-alerta-carrinho" class="popup">
  <div class="popup-carVazio">
    <div class="alerta-icone"><img src="img/icone_alerta.svg" alt="Alerta" /></div>
    <h2>Aviso</h2>
    <p>Seu carrinho está vazio.</p>
    <button class="cancelar" onclick="fecharPopupAlerta()">Fechar</button>
  </div>
</div>
  
<!-- ==================== POP-UP DE ALERTA (DIGITAR VALOR DE PAGAMENTO) ==================== -->
<div id="popup-alerta-pagamento" class="popup">
  <div class="popup-carVazio">
    <div class="alerta-icone"><img src="img/icone_alerta.svg" alt="Alerta" /></div>
    <h2>Aviso</h2>
    <p>Inserir valor de pagamento.</p>
    <button class="cancelar" onclick="fecharPopuppagamento()">Fechar</button>
  </div>
</div>
  
  <!-- ==================== POP-UP PIX ==================== -->
<div id="popup-pix" class="popup">
  <div class="popup-conteudo">
    <h2>Pagamento via PIX</h2>
    <p>Escaneie o QR Code abaixo para pagar:</p>
    
    <!-- Imagem do QR Code -->
    <img src="img/arroz.png" 
         alt="QRCode PIX" 
         style="width:220px; height:auto; margin:1rem auto; display:block; border:2px solid #555; border-radius:10px;">

  <p>Chave PIX: <strong>00990804275</strong></p>
<p id="valor-total-pix" style="font-size:1.2rem; font-weight:bold; color:#2c3e50; margin-top:0.5rem;">
  Inserir este valor no seu App: R$ 0,00
</p>

    <div class="botoes">
      <button class="cancelar" onclick="fecharPix()">Voltar</button>
      <button class="confirmar" onclick="concluirPedidoPix()">Finalizar</button>
    </div>
  </div>
</div>
  <script>
    /* ==================== VARIÁVEIS GLOBAIS ==================== */
    let carrinho = []; // lista de itens do carrinho
    const popup = document.getElementById('popup');
    const popupTitle = document.getElementById('popup-title');
    const popupInput = document.getElementById('popup-input');
    let itemSelecionado = null; // item clicado no cardápio

    /* ==================== EVENTO: CLICK EM CADA ITEM ==================== */
    document.querySelectorAll('.item').forEach(item => {
      item.addEventListener('click', () => {
        itemSelecionado = item;
        const nome = item.querySelector('.item-name')?.innerText || "Produto";
        popupTitle.textContent = `Inserir quantidade para: ${nome}`;
        popupInput.value = 1;
        popup.style.display = 'flex';
        popupInput.focus();
      });
    });

    /* ==================== CONFIRMA A QUANTIDADE NO POPUP ==================== */
    function confirmarPopup() {
      const qtd = parseInt(popupInput.value);
      if (isNaN(qtd) || qtd < 1) {
        alert('Digite uma quantidade válida.');
        popupInput.focus();
        return;
      }

      // Extrai dados do item selecionado
      const nome = itemSelecionado?.querySelector('.item-name')?.innerText || 'Produto';
      const precoText = itemSelecionado?.querySelector('.item-price')?.innerText || 'R$ 0,00';
      const preco = parseFloat(precoText.replace('R$', '').replace(',', '.'));

      // Se item já existe no carrinho, soma; caso contrário adiciona
      const existente = carrinho.find(item => item.nome === nome);
      if (existente) {
        existente.qtd += qtd;
      } else {
        carrinho.push({ nome, qtd, preco });
      }

      atualizarCarrinho();
      popup.style.display = 'none';
    }

    /* ==================== ATUALIZA O BOTÃO DO CARRINHO ==================== */
    function atualizarCarrinho() {
      let total = carrinho.reduce((soma, item) => soma + item.qtd * item.preco, 0);
      const botao = document.querySelector('.botao-carrinho');
      botao.innerHTML = `<img class="icone-car" src="img/icone_car.svg" alt="Carrinho"> Total: R$ ${total.toFixed(2).replace('.', ',')}`;
    }

    /* ==================== FUNÇÕES DE FECHAR POPUPS ==================== */
    function fecharPopup() { popup.style.display = 'none'; }
    function fecharResumo() { document.getElementById('resumo-pedido').style.display = 'none'; }
    function fecharPagamento() { document.getElementById('pagamento').style.display = 'none'; }

    /* ==================== MOSTRAR RESUMO DO PEDIDO ==================== */
    function mostrarResumo() {
      if (carrinho.length === 0) {
    mostrarPopupAlerta(); // Mostra o novo popup
    return;
  }

      const lista = document.getElementById('lista-pedido');
      lista.innerHTML = "";
      let total = 0;

      carrinho.forEach((item, index) => {
        const subtotal = item.qtd * item.preco;
        total += subtotal;
        lista.innerHTML += `
          <p>
            <strong>${item.qtd}x</strong> ${item.nome} - R$ ${item.preco.toFixed(2).replace('.', ',')} 
            <br><small class="subtotal">Subtotal: R$ ${subtotal.toFixed(2).replace('.', ',')}</small>
            <br>
            <button class="remover-item" onclick="removerItem(${index})">Remover</button>
          </p>
          <hr/>
        `;
      });

      lista.innerHTML += `<p class="tt-liquido">Total líquido:<strong> R$ ${total.toFixed(2).replace('.', ',')}</strong></p>`;
      document.getElementById('resumo-pedido').style.display = 'flex';
    }

    /* ==================== REMOVER ITEM DO CARRINHO ==================== */
    function removerItem(index) {
      if (index > -1 && index < carrinho.length) {
        carrinho.splice(index, 1);
        mostrarResumo();
        atualizarCarrinho();
      }
    }

    /* ==================== TROCA ENTRE CATEGORIAS (PRATOS, BEBIDAS, ETC.) ==================== */
    function toggleGrid(id) {
      const grids = document.querySelectorAll('.grid');
      grids.forEach(grid => {
        grid.id === id ? grid.classList.remove('hidden') : grid.classList.add('hidden');
      });
    }

    /* ==================== ABRE TELA DE PAGAMENTO ==================== */
    function abrirPagamento() {
      const divItens = document.getElementById('pagamento-itens');
      divItens.innerHTML = "";
      let total = 0;

      carrinho.forEach(item => {
        const subtotal = item.qtd * item.preco;
        total += subtotal;
        divItens.innerHTML += `
          <p><strong>${item.qtd}x</strong> ${item.nome} - R$ ${item.preco.toFixed(2).replace('.', ',')}
          <br><small>Subtotal: R$ ${subtotal.toFixed(2).replace('.', ',')}</small></p><hr/>
        `;
      });

      divItens.innerHTML += `<p class="tt-liquido">Total líquido:<strong> R$ ${total.toFixed(2).replace('.', ',')}</strong></p>`;
      document.getElementById("valor-dinheiro").value = "";
      document.getElementById("valor-troco").textContent = "";
      document.getElementById('pagamento').style.display = 'flex';
    }

    /* ==================== CALCULAR TROCO ==================== */
    function calcularTroco() {
      const valor = parseFloat(document.getElementById("valor-dinheiro").value);
      let total = carrinho.reduce((soma, item) => soma + item.qtd * item.preco, 0);

      if (!isNaN(valor)) {
        let troco = valor - total;
        let trocoTexto = troco >= 0 
          ? `Troco: R$ ${troco.toFixed(2).replace('.', ',')}` 
          : `Falta: R$ ${(troco * -1).toFixed(2).replace('.', ',')}`;
        document.getElementById("valor-troco").textContent = trocoTexto;
      } else {
        document.getElementById("valor-troco").textContent = "";
      }
    }

    /* ==================== CONCLUIR PEDIDO ==================== */
    function concluirPedido() {
      const valor = parseFloat(document.getElementById("valor-dinheiro").value);
      let total = carrinho.reduce((soma, item) => soma + item.qtd * item.preco, 0);

      if (isNaN(valor)) {
        document.getElementById("popup-alerta-pagamento").style.display = "flex";
        // alert("Por favor, informe o valor em dinheiro.");
        document.getElementById("valor-dinheiro").focus();
        return;
      }

      if (valor < total) {
        const falta = (total - valor).toFixed(2).replace('.', ',');
        alert(`O valor informado é insuficiente. Ainda faltam R$ ${falta}.`);
        document.getElementById("valor-dinheiro").focus();
        return;
      }

      // Mostra a mensagem final
      document.getElementById("mensagem-final").style.display = "flex";

      // Fecha e reinicia após 2 segundos
      setTimeout(() => {
        fecharMensagemFinal();
      }, 2000);
    }

    /* ==================== RESETAR APÓS FINALIZAÇÃO ==================== */
    function fecharMensagemFinal() {
      carrinho = []; 
      atualizarCarrinho(); 
      document.getElementById("mensagem-final").style.display = "none";
      fecharPopup();
      fecharResumo();
      fecharPagamento();
    }

  // Função para mostrar o popup de alerta
function mostrarPopupAlerta() {
  document.getElementById('popup-alerta-carrinho').style.display = 'flex';
}

// Função para fechar o popup de alerta
function fecharPopupAlerta() {
  document.getElementById('popup-alerta-carrinho').style.display = 'none';
}

  function fecharPopuppagamento() {
    document.getElementById('popup-alerta-pagamento').style.display = 'none';
  }
  function abrirqrcode() {
  // Calcula o total do carrinho
  let total = carrinho.reduce((soma, item) => soma + item.qtd * item.preco, 0);

  // Atualiza o texto do valor total no popup PIX
  const valorPix = document.getElementById("valor-total-pix");
  valorPix.innerHTML = `<p class="tt-liquido">Inserir este valor no seu App:<strong> R$ ${total.toFixed(2).replace('.', ',')}</strong></p>`;

  // Exibe o popup PIX
  document.getElementById("popup-pix").style.display = "flex";
}

function fecharPix() {
  document.getElementById("popup-pix").style.display = "none";
}
  function concluirPedidoPix() {
  // Exibe a mensagem de sucesso
  document.getElementById("mensagem-final").style.display = "flex";

  // Fecha e reseta tudo após 2 segundos
  setTimeout(() => {
    fecharMensagemFinal(); // reutiliza a função já existente
    fecharPix();           // fecha o popup PIX
  }, 2000);
}
    /* ==================== ATALHOS DE TECLADO ==================== */
    popup.addEventListener('click', (e) => { if (e.target === popup) fecharPopup(); });
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') fecharPopup(); });
  </script>
  
</body>
</html>
